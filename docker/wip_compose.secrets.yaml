# # WIP https://blog.gitguardian.com/how-to-handle-secrets-in-docker/
# version: "3.7"

# secrets:
#   sops:
#     external: "true"

# x-options: &options
#   environment: &environment
#     TZ: "${TIMEZONE}"
#   restart: unless-stopped
#   networks:
#     - default
#   secrets:
#     - sops

# services:
#   sops:
#     <<: *options
#     image: mozilla/sops:latest
#     container_name: sops
#     command:
#       - sops
#       - --config
#       - /secrets/sops.yaml
#       - --decrypt
#       - /secrets/sops.enc.yaml
#     volumes:
#       - "${CONFIG_DIR}/secrets:/secrets"
#       - "${CONFIG_DIR}/keys.txt:/secrets/keys.txt"
#     environment:
#       <<: *environment
#       SOPS_AGE_KEY_FILE: /secrets/keys.txt
