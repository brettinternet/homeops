---
# WIP
# https://github.com/sickcodes/Docker-OSX

- name: macos
  containers.podman.podman_container:
    name: macos
    # https://hub.docker.com/r/charlocharlie/epicgames-freegames
    image: docker.io/sickcodes/docker-osx:monterey
    state: "{{ container_state }}"
    recreate: "{{ container_recreate }}"
    generate_systemd: "{{ container_generate_systemd }}"
    env:
      DISPLAY: "DISPLAY=:0.0"
      GENERATE_UNIQUE: true
      MASTER_PLIST_URL: https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix
    ports:
      - 50922:10022
    device:
      - /dev/kvm
    label:
      io.containers.autoupdate: registry
