---
# A configuration file is required before starting - see `prometheus` role

# https://prometheus.io/docs/prometheus/latest/installation/
- name: prometheus
  containers.podman.podman_container:
    name: prometheus
    # https://hub.docker.com/r/prom/prometheus/
    image: docker.io/prom/prometheus
    state: "{{ state }}"
    recreate: "{{ recreate }}"
    env:
      TZ: "{{ tz }}"
    volumes:
      - "{{ appdata_dir }}/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml"
      - "{{ appdata_dir }}/data:/prometheus"
    ports:
      - 9091:9090
    label:
      io.containers.autoupdate: image
