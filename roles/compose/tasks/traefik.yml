---
# Docker provider is unsupported by Traefik with podman:
# https://github.com/traefik/traefik/issues/5730

- name: traefik
  containers.podman.podman_container:
    name: traefik
    image: docker.io/library/traefik:2.4
    state: "{{ state }}"
    restart: yes
    volumes:
      - "{{ appdata_dir }}/traefik:/etc/traefik:rw"
      - "{{ storage_dir }}/logs/traefik:/var/log/traefik"
    ports:
      - "{{ network_bind_addr }}:4080:80"
      - "{{ network_bind_addr }}:4443:443"
